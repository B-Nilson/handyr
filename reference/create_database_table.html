<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create table if not already existing — create_database_table • handyr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create table if not already existing — create_database_table"><meta name="description" content="Create a table in a database if it doesn't already exist.
This is alternative to DBI::dbCreateTable() with additional features for creating primary keys, unique indexes, and indexes."><meta property="og:description" content="Create a table in a database if it doesn't already exist.
This is alternative to DBI::dbCreateTable() with additional features for creating primary keys, unique indexes, and indexes."><meta property="og:image" content="https://b-nilson.github.io/handyr/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">handyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/B-Nilson/handyr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Create table if not already existing</h1>
      <small class="dont-index">Source: <a href="https://github.com/B-Nilson/handyr/blob/main/R/create_database_table.R" class="external-link"><code>R/create_database_table.R</code></a></small>
      <div class="d-none name"><code>create_database_table.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a table in a database if it doesn't already exist.
This is alternative to <code><a href="https://dbi.r-dbi.org/reference/dbCreateTable.html" class="external-link">DBI::dbCreateTable()</a></code> with additional features for creating primary keys, unique indexes, and indexes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_database_table</span><span class="op">(</span></span>
<span>  <span class="va">db</span>,</span>
<span>  <span class="va">table_name</span>,</span>
<span>  <span class="va">new_data</span>,</span>
<span>  primary_keys <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unique_indexes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  indexes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  partition_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  partition_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"range"</span>, <span class="st">"list"</span>, <span class="st">"hash"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  insert_data <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-db">db<a class="anchor" aria-label="anchor" href="#arg-db"></a></dt>
<dd><p>A database connection or path to database (if sqlite or duckdb file extension).</p></dd>


<dt id="arg-table-name">table_name<a class="anchor" aria-label="anchor" href="#arg-table-name"></a></dt>
<dd><p>A character string specifying the table to write to.</p></dd>


<dt id="arg-new-data">new_data<a class="anchor" aria-label="anchor" href="#arg-new-data"></a></dt>
<dd><p>A data frame to write to the table.</p></dd>


<dt id="arg-primary-keys">primary_keys<a class="anchor" aria-label="anchor" href="#arg-primary-keys"></a></dt>
<dd><p>A character vector of column names to use as the primary key, the main identifier of individual rows in a table.
Multiple columns can be specified and uniqueness will be assessed based on the combination of columns.
(e.g. <code>primary_keys = c("col1", "col2")</code> will add a primary key on the combination of <code>col1</code> and <code>col2</code>).</p></dd>


<dt id="arg-unique-indexes">unique_indexes<a class="anchor" aria-label="anchor" href="#arg-unique-indexes"></a></dt>
<dd><p>A list of character vector(s) of column names to use as unique indexes.
These will be added to the table, in addition to the primary key, and will result in an error if non-unique data is inserted/existing.
Indexes speed up queries by allowing for faster lookups, but can increase the size of the database and reduce write performance.</p></dd>


<dt id="arg-indexes">indexes<a class="anchor" aria-label="anchor" href="#arg-indexes"></a></dt>
<dd><p>A list of character vector(s) of column names to use as indexes.</p></dd>


<dt id="arg-partition-by">partition_by<a class="anchor" aria-label="anchor" href="#arg-partition-by"></a></dt>
<dd><p>(UNDER DEVELOPMENT)  A named list of partitions to create, where names correspond to the names of the columns to partition by, and values correspond to the values of that column within each partition (i.e. <code>partition_by = list(gear = list(c(1, 4), c(4, 6)), carb = list(c(1, 4), c(4, 10)))</code> will create partition the table into 2 partitions, one for gears 1,2, and 3, and one for gear 4 and 5).
True partitioning is only supported for Postgres, but for other types mulitiple partition tables will be created and linked using a View.
If <code>NULL</code> (the default), no partitioning will be used.</p></dd>


<dt id="arg-partition-type">partition_type<a class="anchor" aria-label="anchor" href="#arg-partition-type"></a></dt>
<dd><p>(UNDER DEVELOPMENT) A character string specifying the type of partitioning to use.
Currently supports "range" (expects pairs of inclusive start and exclusive end values), "list" (expects vectors of values to match), and "hash" (expects single values).
Default is "range".
Ignored if <code>partition_by</code> is <code>NULL</code>.</p></dd>


<dt id="arg-insert-data">insert_data<a class="anchor" aria-label="anchor" href="#arg-insert-data"></a></dt>
<dd><p>A logical indicating whether to insert the data frame provided in <code>new_data</code> into the created table.
If <code>FALSE</code>, the table will be created but no data will be inserted.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame containing the number of rows inserted into the table.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brayden Nilson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

